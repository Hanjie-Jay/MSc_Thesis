# MSc Thesis: Changepoint Detection in Streaming Data: Novel Robust Methods for Singular Outliers Mitigation

## Introduction
The main objective of this thesis is to introduce novel, robust methods designed to effectively mitigate the influence caused by the occurrence of outliers when detecting changepoints in streaming data. This work explores classical methods such as EWMA and CUSUM, analysing their performance, especially when the outliers are introduced. Subsequently, the newly proposed robust methods based on robust mean estimator (Trimmed Mean, Winsorised Mean, Cosine Taper Mean, Median) and a sliding window for changepoint detection are discussed. These methods are compared with the classical methods using the same experimental settings on simulated datasets. This repository contains all the code utilised within the thesis.

## Getting Started
Below are the version details for Python, the OS, and the associated packages used in this project:
```
Python version: 3.11.3 (Apr 19 2023 18:49:55)
Platform: macOS-13.4-arm64-arm-64bit
Running under: macOS Ventura 13.4

locale:
UTF-8

attached base packages:
[1] os      re      importlib     

external packages:
[1] numpy_1.24.3    pandas_1.5.3   seaborn_0.12.2  
[4] matplotlib_3.7.1 scipy_1.10.1   

project specific packages:
[1] GraphGeneration  ARLFunc    GridEvaluation 
[4] Outliers  ControlChartFunc  NormalParaEstimate
```
**Please set the working directory to this project file in Python to reproduce this project.** Use the following command in your Python script to set the working directory:
```
import os
os.chdir('<path_to_your_project_directory>')
```
Using the Python version and package versions listed above is strongly recommended.

## File and Folder Structure
```
Project/
│
├── __pycache__/
├── Plots/
├── Thesis_Used_Plots/
├── ARLFunc.py
├── ControlChartFunc.py
├── GraphGeneration.py
├── GridEvaluation.py
├── NormalParaEstimate.py
├── Outliers.py
├── README.md
└── simulation_study.py
```

### __pycache__
This folder contains Python cache files.

### Plots
This folder contains plots generated by functions in GridEvaluation.py, GraphGeneration.py, as well as helper functions in main code simulation_study.py during the study. The CE_graphs folder houses graphs for CUSUM and EWMA, while the Robust_Params_graphs folder contains graphs relating to the T, W, CT and M methods.

### Thesis_Used_Plots
This folder stores plots utilised in the thesis, which are cropped version of the corresponding original graphs in the Plots folder.

### ARLFunc.py
This script is a Python module implementing various statistical functions to calculate the Average Run Length (ARL) of a data stream based on different control charts, including CUSUM, EWMA, and charts utilising robust mean estimation methods T, W, CT, and M. The functions in this script are essential tools for evaluating the performance of each changepoint detection model and are mainly used within GridEvaluation.py.

### ControlChartFunc.py
This script is a Python module that contains the `ControlChart` class. This class encapsulates a set of control chart methods utilised for detecting changes in streaming data. The functions within this class can compute control statistics and the alert values for each method, including traditional methods likes the Cumulative Sum (CUSUM) control chart, the Exponentially Weighted Moving Average (EWMA) control chart, and robust methods utilising sequence of means calculated with trimmed mean, winsorised mean, cosine-tapered mean, and median.

### GraphGeneration.py
This script is a Python module containing functions that generate basic graphs for EWMA and CUSUM.

### GridEvaluation.py
This script is a Python module featuring the `GridDataEvaluate` class, a high-level entity that generates final tables and graphs for all discussed methods. The class uses grid parameters to simulate data and calculate the Average Run Length (ARL), subsequently evaluating the performance of all models in the context of changepoint detection. It also includes functions to plot and compare their performance. Two additional functions for streaming data with multiple changepoints and their corresponding graphs are also included at the end.

### NormalParaEstimate.py
This script is a Python module containing the `Normal_Mean_Var_Estimator` class, which calculates the estimated mean and variance of streaming data (mainly for the burn-in period), assuming the data follows a normal distribution.

### Outliers.py
This script is a Python module that contains the class `OutlierInjector`. This class represents an entity responsible for injecting outliers into the dataset at positions specified by outlier_position, using the definition of outliers described in the thesis.

### **simulation_study.py**
This script is a Python module serving as the **main function** that utilised all the modules to generate results, plotting additional graphs, and test functions, classes and modules

## Version Control and Updates

This section provides a historical account of different versions of the project, along with their key updates and enhancements.

### Version 1.0 (Initial Release)
**Release Date:** Sep 4, 2023

- **Developed `Python` scripts** for reproducible analysis of changepoint detection using both classical methods (CUSUM and EWMA) and novel robust methods (T, W, CT and M). Evaluations were conducted using simulated data streams.

## Author and Acknowledgments

This project was conceived and developed by Hanjie Liang as a part of the MATH70088 MSc Statistics Research Project at Imeprial, an important component of the thesis. Profound gratitude is extended to my supervisor, Prof. Niall Adams from Imperial College London, whose whose unparalleled expertise, guidance, unwavering support, and scholarly insights have been invaluable throughout the development of this thesis.